import{_ as i,c as a,o as t,ag as n}from"./chunks/framework.BI3ie6Fx.js";const E=JSON.parse('{"title":"Error Codes","description":"Reference for error codes and handling in Core","frontmatter":{"title":"Error Codes","description":"Reference for error codes and handling in Core"},"headers":[],"relativePath":"reference/error-codes.md","filePath":"reference/error-codes.md"}'),e={name:"reference/error-codes.md"};function r(l,s,h,p,d,o){return t(),a("div",null,[...s[0]||(s[0]=[n(`<h1 id="error-codes" tabindex="-1">Error Codes <a class="header-anchor" href="#error-codes" aria-label="Permalink to &quot;Error Codes&quot;">‚Äã</a></h1><p>Core provides a comprehensive error handling system that gives you human-readable error messages with solutions. This page documents common error codes and how to handle them.</p><h2 id="how-errors-work" tabindex="-1">How Errors Work <a class="header-anchor" href="#how-errors-work" aria-label="Permalink to &quot;How Errors Work&quot;">‚Äã</a></h2><p>When Core encounters an error, it:</p><ol><li>Identifies the error code</li><li>Looks up a user-friendly explanation</li><li>Displays the error with severity, description, and solution</li><li>In debug mode, shows technical details</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>üö® Database Connection Failed [startup] 23:31:48</span></span>
<span class="line"><span>The bot cannot connect to the database server. This usually means</span></span>
<span class="line"><span>the database is not running or the connection settings are incorrect.</span></span>
<span class="line"><span>Check if your database server is running and verify your connection</span></span>
<span class="line"><span>settings in the .env file (host, port, username, password).</span></span>
<span class="line"><span>‚ö†Ô∏è  Severity: CRITICAL</span></span></code></pre></div><h2 id="using-the-errorhandler" tabindex="-1">Using the ErrorHandler <a class="header-anchor" href="#using-the-errorhandler" aria-label="Permalink to &quot;Using the ErrorHandler&quot;">‚Äã</a></h2><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ErrorHandler, logger } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> riskyOperation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Formatted error with solution</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyAddon&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, logger);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="adding-custom-error-mappings" tabindex="-1">Adding Custom Error Mappings <a class="header-anchor" href="#adding-custom-error-mappings" aria-label="Permalink to &quot;Adding Custom Error Mappings&quot;">‚Äã</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addErrorMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MY_CUSTOM_ERROR&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Custom Error Title&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;What happened and why.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  solution: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;How to fix it.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  severity: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;medium&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // critical, high, medium, low</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><hr><h2 id="database-errors" tabindex="-1">Database Errors <a class="header-anchor" href="#database-errors" aria-label="Permalink to &quot;Database Errors&quot;">‚Äã</a></h2><p>Core uses SQLite via better-sqlite3. While the error mapping includes MySQL error codes for historical reasons, most database errors you&#39;ll encounter are SQLite-specific.</p><h3 id="sqlite-cantopen" tabindex="-1">SQLITE_CANTOPEN <a class="header-anchor" href="#sqlite-cantopen" aria-label="Permalink to &quot;SQLITE_CANTOPEN&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Cannot Open Database</td></tr><tr><td><strong>Severity</strong></td><td>Critical</td></tr><tr><td><strong>Description</strong></td><td>SQLite cannot open the database file.</td></tr><tr><td><strong>Solution</strong></td><td>Check that the <code>database/</code> directory exists and is writable. Ensure no other process has the file locked.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Directory doesn&#39;t exist</li><li>Permission denied</li><li>File locked by another process</li></ul><h3 id="sqlite-corrupt" tabindex="-1">SQLITE_CORRUPT <a class="header-anchor" href="#sqlite-corrupt" aria-label="Permalink to &quot;SQLITE_CORRUPT&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Database Corrupted</td></tr><tr><td><strong>Severity</strong></td><td>Critical</td></tr><tr><td><strong>Description</strong></td><td>The SQLite database file is corrupted.</td></tr><tr><td><strong>Solution</strong></td><td>Delete the database file and restart. If you have backups, restore from backup.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Improper shutdown</li><li>Disk failure</li><li>Concurrent access issues</li></ul><h3 id="er-no-such-table" tabindex="-1">ER_NO_SUCH_TABLE <a class="header-anchor" href="#er-no-such-table" aria-label="Permalink to &quot;ER_NO_SUCH_TABLE&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Database Table Missing</td></tr><tr><td><strong>Severity</strong></td><td>High</td></tr><tr><td><strong>Description</strong></td><td>A required table is missing from the database.</td></tr><tr><td><strong>Solution</strong></td><td>Run the database migration scripts to create the required tables, or check if the table name is correct.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Schema not initialized</li><li>Table dropped accidentally</li><li>Typo in table name</li><li>Using wrong database</li></ul><hr><h2 id="discord-api-errors" tabindex="-1">Discord API Errors <a class="header-anchor" href="#discord-api-errors" aria-label="Permalink to &quot;Discord API Errors&quot;">‚Äã</a></h2><h3 id="discord-api-error" tabindex="-1">DISCORD_API_ERROR <a class="header-anchor" href="#discord-api-error" aria-label="Permalink to &quot;DISCORD_API_ERROR&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Discord API Error</td></tr><tr><td><strong>Severity</strong></td><td>Medium</td></tr><tr><td><strong>Description</strong></td><td>There was an error communicating with Discord&#39;s servers.</td></tr><tr><td><strong>Solution</strong></td><td>Check your bot token and permissions. If the issue persists, Discord&#39;s API might be experiencing issues.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Invalid bot token</li><li>Discord outage</li><li>Rate limiting</li><li>Invalid request data</li></ul><h3 id="missing-permissions" tabindex="-1">MISSING_PERMISSIONS <a class="header-anchor" href="#missing-permissions" aria-label="Permalink to &quot;MISSING_PERMISSIONS&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Bot Missing Permissions</td></tr><tr><td><strong>Severity</strong></td><td>Medium</td></tr><tr><td><strong>Description</strong></td><td>The bot doesn&#39;t have the required permissions to perform this action.</td></tr><tr><td><strong>Solution</strong></td><td>Check the bot&#39;s role permissions in your Discord server settings.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Bot role too low in hierarchy</li><li>Missing specific permissions</li><li>Channel-level permission overrides</li></ul><hr><h2 id="network-errors" tabindex="-1">Network Errors <a class="header-anchor" href="#network-errors" aria-label="Permalink to &quot;Network Errors&quot;">‚Äã</a></h2><h3 id="enotfound" tabindex="-1">ENOTFOUND <a class="header-anchor" href="#enotfound" aria-label="Permalink to &quot;ENOTFOUND&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Network Connection Error</td></tr><tr><td><strong>Severity</strong></td><td>High</td></tr><tr><td><strong>Description</strong></td><td>Cannot resolve the hostname. This could be a network connectivity issue.</td></tr><tr><td><strong>Solution</strong></td><td>Check your internet connection and verify the server hostname is correct.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>No internet connection</li><li>DNS resolution failure</li><li>Hostname typo</li></ul><h3 id="etimedout" tabindex="-1">ETIMEDOUT <a class="header-anchor" href="#etimedout" aria-label="Permalink to &quot;ETIMEDOUT&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Title</strong></td><td>Connection Timeout</td></tr><tr><td><strong>Severity</strong></td><td>Medium</td></tr><tr><td><strong>Description</strong></td><td>The connection to the server timed out.</td></tr><tr><td><strong>Solution</strong></td><td>Check your network connection and server availability. The server might be overloaded.</td></tr></tbody></table><p><strong>Common Causes</strong>:</p><ul><li>Server overloaded</li><li>Network congestion</li><li>Firewall issues</li><li>Server not responding</li></ul><hr><h2 id="protection-errors" tabindex="-1">Protection Errors <a class="header-anchor" href="#protection-errors" aria-label="Permalink to &quot;Protection Errors&quot;">‚Äã</a></h2><p>Thrown by the <code>protect()</code> function:</p><h3 id="request-duplicate" tabindex="-1">REQUEST_DUPLICATE <a class="header-anchor" href="#request-duplicate" aria-label="Permalink to &quot;REQUEST_DUPLICATE&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Severity</strong></td><td>Low</td></tr><tr><td><strong>Description</strong></td><td>The same request is already being processed.</td></tr><tr><td><strong>Solution</strong></td><td>Wait for the current request to complete before retrying.</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { protect } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#core&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;action&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doSomething);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;REQUEST_DUPLICATE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Please wait, your request is being processed.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ephemeral: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="rate-limited" tabindex="-1">RATE_LIMITED <a class="header-anchor" href="#rate-limited" aria-label="Permalink to &quot;RATE_LIMITED&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Severity</strong></td><td>Low</td></tr><tr><td><strong>Description</strong></td><td>User has exceeded the rate limit for this action.</td></tr><tr><td><strong>Solution</strong></td><td>Wait before retrying.</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;action&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, doSomething);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;RATE_LIMITED&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`Slow down! Try again in \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retryAfter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} seconds.\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ephemeral: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><hr><h2 id="sqlite-errors" tabindex="-1">SQLite Errors <a class="header-anchor" href="#sqlite-errors" aria-label="Permalink to &quot;SQLite Errors&quot;">‚Äã</a></h2><h3 id="sqlite-constraint-unique" tabindex="-1">SQLITE_CONSTRAINT_UNIQUE <a class="header-anchor" href="#sqlite-constraint-unique" aria-label="Permalink to &quot;SQLITE_CONSTRAINT_UNIQUE&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Description</strong></td><td>Attempted to insert a duplicate value in a unique column.</td></tr><tr><td><strong>Solution</strong></td><td>Use INSERT OR REPLACE, or check if record exists first.</td></tr></tbody></table><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INSERT INTO users (id) VALUES (?)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;SQLITE_CONSTRAINT_UNIQUE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // User already exists</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="sqlite-constraint-foreignkey" tabindex="-1">SQLITE_CONSTRAINT_FOREIGNKEY <a class="header-anchor" href="#sqlite-constraint-foreignkey" aria-label="Permalink to &quot;SQLITE_CONSTRAINT_FOREIGNKEY&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Description</strong></td><td>Foreign key constraint violation.</td></tr><tr><td><strong>Solution</strong></td><td>Ensure referenced record exists before inserting.</td></tr></tbody></table><h3 id="sqlite-busy" tabindex="-1">SQLITE_BUSY <a class="header-anchor" href="#sqlite-busy" aria-label="Permalink to &quot;SQLITE_BUSY&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Description</strong></td><td>Database is locked by another process.</td></tr><tr><td><strong>Solution</strong></td><td>Use WAL mode, retry with backoff, or ensure single writer.</td></tr></tbody></table><h3 id="sqlite-readonly" tabindex="-1">SQLITE_READONLY <a class="header-anchor" href="#sqlite-readonly" aria-label="Permalink to &quot;SQLITE_READONLY&quot;">‚Äã</a></h3><table tabindex="0"><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Description</strong></td><td>Attempted to write to a read-only database.</td></tr><tr><td><strong>Solution</strong></td><td>Check file permissions and database path.</td></tr></tbody></table><hr><h2 id="severity-levels" tabindex="-1">Severity Levels <a class="header-anchor" href="#severity-levels" aria-label="Permalink to &quot;Severity Levels&quot;">‚Äã</a></h2><table tabindex="0"><thead><tr><th>Level</th><th>Color</th><th>Meaning</th></tr></thead><tbody><tr><td><strong>Critical</strong></td><td>Red background</td><td>System cannot function, immediate action required</td></tr><tr><td><strong>High</strong></td><td>Red</td><td>Major functionality broken</td></tr><tr><td><strong>Medium</strong></td><td>Yellow</td><td>Feature affected but workarounds exist</td></tr><tr><td><strong>Low</strong></td><td>Cyan</td><td>Minor issue, can be ignored temporarily</td></tr></tbody></table><hr><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">‚Äã</a></h2><h3 id="_1-always-catch-errors" tabindex="-1">1. Always Catch Errors <a class="header-anchor" href="#_1-always-catch-errors" aria-label="Permalink to &quot;1. Always Catch Errors&quot;">‚Äã</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bad - errors crash your addon</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doRiskyThing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Good - handle gracefully</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doRiskyThing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MyAddon&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Optionally notify user</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_2-use-appropriate-response" tabindex="-1">2. Use Appropriate Response <a class="header-anchor" href="#_2-use-appropriate-response" aria-label="Permalink to &quot;2. Use Appropriate Response&quot;">‚Äã</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createTicket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;RATE_LIMITED&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // User error - inform them</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Please slow down!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ephemeral: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // System error - log and generic message</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Tickets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> interaction.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      content: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Something went wrong. Please try again later.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ephemeral: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-add-context" tabindex="-1">3. Add Context <a class="header-anchor" href="#_3-add-context" aria-label="Permalink to &quot;3. Add Context&quot;">‚Äã</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// With context - easier to debug</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Tickets/createTicket&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Without context - harder to trace</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span></code></pre></div><h3 id="_4-don-t-swallow-errors" tabindex="-1">4. Don&#39;t Swallow Errors <a class="header-anchor" href="#_4-don-t-swallow-errors" aria-label="Permalink to &quot;4. Don&#39;t Swallow Errors&quot;">‚Äã</a></h3><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Bad - silently fails</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doThing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Nothing happens</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Good - at least log it</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doThing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  logger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;[MyAddon] doThing failed:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-custom-error-types" tabindex="-1">5. Custom Error Types <a class="header-anchor" href="#_5-custom-error-types" aria-label="Permalink to &quot;5. Custom Error Types&quot;">‚Äã</a></h3><p>For addon-specific errors:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Register once during initialization</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ErrorHandler.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addErrorMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TICKET_LIMIT_REACHED&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Ticket Limit Reached&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  description: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;You have reached the maximum number of open tickets.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  solution: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Please close some existing tickets before opening new ones.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  severity: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;low&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Throw when needed</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Too many tickets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">error.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;TICKET_LIMIT_REACHED&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> error;</span></span></code></pre></div><hr><h2 id="debug-mode" tabindex="-1">Debug Mode <a class="header-anchor" href="#debug-mode" aria-label="Permalink to &quot;Debug Mode&quot;">‚Äã</a></h2><p>With <code>DEBUG=true</code>, errors include technical details:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>üö® Database Table Missing [Tickets] 23:31:48</span></span>
<span class="line"><span>A required table is missing from the database.</span></span>
<span class="line"><span>Run the database migration scripts to create the required tables.</span></span>
<span class="line"><span>‚ö†Ô∏è  Severity: HIGH</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Technical Details:</span></span>
<span class="line"><span>   Error Code: ER_NO_SUCH_TABLE</span></span>
<span class="line"><span>   Error Message: Table &#39;bot.tickets&#39; doesn&#39;t exist</span></span>
<span class="line"><span>   SQL: SELECT * FROM tickets WHERE id = ?</span></span></code></pre></div><p>Enable debug mode during development for maximum information.</p>`,86)])])}const c=i(e,[["render",r]]);export{E as __pageData,c as default};
